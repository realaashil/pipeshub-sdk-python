"""Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT."""

from __future__ import annotations
from pipeshub.types import BaseModel, UNSET_SENTINEL, UnrecognizedStr
from pydantic import model_serializer
from typing import Literal, Optional, Union
from typing_extensions import NotRequired, TypedDict


Event = Union[
    Literal[
        "connected",
        "chunk",
        "citation",
        "complete",
        "error",
    ],
    UnrecognizedStr,
]


class SSEEventTypedDict(TypedDict):
    r"""Server-Sent Event structure for streaming responses.<br><br>
    <b>Event Types:</b>
    <ul>
    <li><code>connected</code> - Initial connection established</li>
    <li><code>chunk</code> - Partial response content</li>
    <li><code>citation</code> - Citation reference</li>
    <li><code>complete</code> - Final response with all data</li>
    <li><code>error</code> - Error occurred during streaming</li>
    </ul>

    """

    event: NotRequired[Event]
    data: NotRequired[str]
    r"""JSON-encoded event payload"""


class SSEEvent(BaseModel):
    r"""Server-Sent Event structure for streaming responses.<br><br>
    <b>Event Types:</b>
    <ul>
    <li><code>connected</code> - Initial connection established</li>
    <li><code>chunk</code> - Partial response content</li>
    <li><code>citation</code> - Citation reference</li>
    <li><code>complete</code> - Final response with all data</li>
    <li><code>error</code> - Error occurred during streaming</li>
    </ul>

    """

    event: Optional[Event] = None

    data: Optional[str] = None
    r"""JSON-encoded event payload"""

    @model_serializer(mode="wrap")
    def serialize_model(self, handler):
        optional_fields = set(["event", "data"])
        serialized = handler(self)
        m = {}

        for n, f in type(self).model_fields.items():
            k = f.alias or n
            val = serialized.get(k)

            if val != UNSET_SENTINEL:
                if val is not None or k not in optional_fields:
                    m[k] = val

        return m
