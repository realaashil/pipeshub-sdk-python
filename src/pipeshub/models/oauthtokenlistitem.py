"""Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT."""

from __future__ import annotations
from datetime import datetime
from pipeshub.types import BaseModel, UNSET_SENTINEL, UnrecognizedStr
import pydantic
from pydantic import model_serializer
from typing import List, Literal, Optional, Union
from typing_extensions import Annotated, NotRequired, TypedDict


TokenType = Union[
    Literal[
        "access",
        "refresh",
    ],
    UnrecognizedStr,
]
r"""Type of token"""


class OAuthTokenListItemTypedDict(TypedDict):
    r"""Information about an issued token"""

    id: NotRequired[str]
    r"""Token ID"""
    token_type: NotRequired[TokenType]
    r"""Type of token"""
    user_id: NotRequired[str]
    r"""User ID (if user-based token)"""
    scopes: NotRequired[List[str]]
    r"""Granted scopes"""
    created_at: NotRequired[datetime]
    r"""Token creation time"""
    expires_at: NotRequired[datetime]
    r"""Token expiration time"""
    is_revoked: NotRequired[bool]
    r"""Whether token has been revoked"""


class OAuthTokenListItem(BaseModel):
    r"""Information about an issued token"""

    id: Optional[str] = None
    r"""Token ID"""

    token_type: Annotated[Optional[TokenType], pydantic.Field(alias="tokenType")] = None
    r"""Type of token"""

    user_id: Annotated[Optional[str], pydantic.Field(alias="userId")] = None
    r"""User ID (if user-based token)"""

    scopes: Optional[List[str]] = None
    r"""Granted scopes"""

    created_at: Annotated[Optional[datetime], pydantic.Field(alias="createdAt")] = None
    r"""Token creation time"""

    expires_at: Annotated[Optional[datetime], pydantic.Field(alias="expiresAt")] = None
    r"""Token expiration time"""

    is_revoked: Annotated[Optional[bool], pydantic.Field(alias="isRevoked")] = None
    r"""Whether token has been revoked"""

    @model_serializer(mode="wrap")
    def serialize_model(self, handler):
        optional_fields = set(
            [
                "id",
                "tokenType",
                "userId",
                "scopes",
                "createdAt",
                "expiresAt",
                "isRevoked",
            ]
        )
        serialized = handler(self)
        m = {}

        for n, f in type(self).model_fields.items():
            k = f.alias or n
            val = serialized.get(k)

            if val != UNSET_SENTINEL:
                if val is not None or k not in optional_fields:
                    m[k] = val

        return m


try:
    OAuthTokenListItem.model_rebuild()
except NameError:
    pass
